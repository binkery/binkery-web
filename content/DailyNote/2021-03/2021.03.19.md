# 2021.03.19
- Android


## Android 无障碍外挂

一直以来，我们一个抢单池的业务，网络接口的请求量巨大，一直怀疑是用户用一些外挂在反复的刷单。研究了一下，目前 Android 来说，比较简单一些的外挂实现方案，就是利用无障碍服务来进行抢单。通过监听页面变化和页面内容的变化，可以反复的发送点击事件，触发页面的刷新，再监听页面的变化，反复循环的自动化操作。

目前第一步，就是先确定一下用户是否用了无障碍服务，如果请求量异常的用户都开启了无障碍服务的话，那么他们大概率就是用了外挂了。然后下一步就是针对这种外挂方式，我们可以想想有啥办法可以规避这种外挂了。

## 卖友情链接

网站开建已经有 10 年了，也不知道是什么样的情怀，就是很喜欢自己搞一个网站，哪怕现在实在是没有时间写东西了，也是一直很执着着让它一直运行着。每年投入不多，域名续费，几十块钱，网站空间，也就一两百块钱一年，至于收入，一直没有，挂过 Google 广告，但是那个广告费，一直没有达到提现的标准。后来在一些小平台上卖卖友情链接，10 块钱一个月，还是不错的。每具体统计过，前前后后大概也收入了一两百了吧，美滋滋的。


## 中美对话

今天大佬门在阿拉斯加进行一轮对话，从中午一些新闻上可以看出，气氛还是比较严肃紧张的，看来老美并没有想好好和中国进行对话，而中国这一次也没有那么和气好欺负了。反正对于中国来说，确实挺难的，想要发展，却碰见不想让你好好发展的。其实很正常，丛林法则，老二受到打压是很正常的，这个时候，没有什么道义，正理，讲道理都是先把对手打趴下才开始的。所以中国现在怎么硬气都不为过。

## python3 环境

安装 pip3 

	sudo apt-get install python3-pip

安装 markdown

	pip3 install markdown
	pip3 install mistune # 另外一个 markdown 的解析器，据说性能更高点

安装 bs4

	pip3 install bs4

安装 lxml

	pip3 install lxml


今天在研究博客程序，发现性能出现了一定的瓶颈。再之前是内存出现瓶颈，我把格式化后的文章内容都放在了内存里了，随着文章内容的增加，出现内存溢出了，这个问题在我自己的电脑上跑的时候没有发现，在云服务器上跑的时候就出现了。由于内存溢出，程序被中断了，所以博客没有更新。

现在出现博客没有更新，问题是运算的时间太长了，我在自己的电脑上，运行也需要三四分钟，在云服务器上运行，就需要十来分钟了。从腾讯云的监控上可以看出，在十几分钟里，整个 CPU 的跑满的。

看来博客程序需要重构一下了，大概想了一下，可以考虑引入临时文件来解决这个问题。然后耗时一个小时，把临时文件的功能简单的加上了，中间出了点小 bug ，但是很快就解决了，现在好了，运行一遍只需要几秒钟的时间，嗖嗖的～～